# Here you can define all your data sets by using simple YAML syntax.
#
# Documentation for this file format can be found in "The Data Catalog"
# Link: https://docs.kedro.org/en/stable/data/data_catalog.html

### REPOSITORY DB
"dspacedb/public/{table}":
  type: pandas.SQLTableDataset
  table_name: "{table}"
  load_args:
    schema: "public"
  credentials: "dspacedb"

"raw/{source}/{entity}":
  type: pandas.CSVDataset
  filepath: "data/01_raw/{source}/{entity}.csv"
  metadata:
    kedro-viz:
      layer: raw

"raw/{source}/{entity}#parquet":
  type: pandas.ParquetDataset
  filepath: "data/01_raw/{source}/{entity}.parquet"
  metadata:
    kedro-viz:
      layer: raw

"raw/{source}/{entity}_dev#parquet":
  type: pandas.ParquetDataset
  filepath: "data/01_raw/{source}/{entity}_dev.parquet"
  metadata:
    kedro-viz:
      layer: raw

"intermediate/{source}/{entity}":
  type: pandas.CSVDataset
  filepath: "data/02_intermediate/{source}/{entity}.csv"
  metadata:
    kedro-viz:
      layer: intermediate

"intermediate/{source}/{entity}#parquet":
  type: pandas.ParquetDataset
  filepath: "data/02_intermediate/{source}/{entity}.parquet"
  metadata:
    kedro-viz:
      layer: intermediate

"primary/{source}/{entity}":
  type: pandas.CSVDataset
  filepath: "data/03_primary/{source}/{entity}.csv"
  metadata:
    kedro-viz:
      layer: primary

"primary/{source}/{entity}#parquet":
  type: pandas.ParquetDataset
  filepath: "data/03_primary/{source}/{entity}.parquet"
  metadata:
    kedro-viz:
      layer: primary

# landing
"ldg/{source}/{tablename}":
  type: pandas.SQLTableDataset
  table_name: "{tablename}"
  load_args:
    schema: "ldg_{source}"
  save_args:
    schema: "ldg_{source}"
    if_exists: replace
  credentials: dw

# staging
"stg_{source}/{dataset}":
  type: pandas.SQLTableDataset
  table_name: "{dataset}"
  save_args:
    schema: "stg_{source}"
    if_exists: replace
  load_args:
    schema: "stg_{source}"
  credentials: dw

"dm/{dataset}":
  type: pandas.SQLTableDataset
  table_name: "{dataset}"
  load_args:
    schema: "dm"
  save_args:
    schema: "dm"
    if_exists: replace
  credentials: dw

"dm_{source}/{dataset}":
  type: pandas.SQLTableDataset
  table_name: "{dataset}"
  load_args:
    schema: "dm_{source}"
  credentials: dw

"dv_{source}/{dataset}":
  type: pandas.SQLTableDataset
  table_name: "{dataset}"
  load_args:
    schema: "dv_{source}"
  credentials: dw